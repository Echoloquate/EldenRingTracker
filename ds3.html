<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Souls III - Item Tracker</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap">
<link rel="stylesheet" href="shared.css">
<style>
  :root {
    --accent: #d07840;
    --accent-dim: #a06030;
    --accent-bright: #f0a060;
    --accent-rgb: 196, 112, 60;
    --bg: #181614;
    --bg-card: #201e1a;
    --bg-card-hover: #2a2720;
    --border: #382e24;
    --border-light: #4c4234;
    --text: #d4c8a8;
    --text-dim: #988c70;
    --text-bright: #f0e8d0;
    --checked-text: #585040;
    --green: #6a9a5a;
    --green-dim: #4a7a3a;
    --red: #a04a4a;
  }
</style>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
<script src="ds3-data.js"></script>
</head>
<body>

<header>
  <h1>Dark Souls III<span>Item Tracker</span></h1>
  <a href="./" class="nav-link">&larr; All Trackers</a>
  <a href="er.html" class="nav-link">Elden Ring &rarr;</a>
</header>

<div class="info-box">
  <button class="info-toggle" id="infoToggle">
    About this tracker <span class="arrow">&#9660;</span>
  </button>
  <div class="info-content" id="infoContent">
    <p>This is a checklist for the <a href="https://www.nexusmods.com/darksouls3/mods/361" target="_blank" rel="noopener">Dark Souls III Item Randomizer</a> by thefifthmatt. It covers all key items, boss souls, estus shards, undead bone shards, ashes, crystal lizards, ring locations, and shop checks across the base game, Ashes of Ariandel, and The Ringed City.</p>
    <p>Create a room to share progress with your co-op group in real time - just give everyone the same room code and checks will sync automatically.</p>
  </div>
</div>

<div class="toolbar">
<div class="category-toggles" id="categoryToggles">
  <span class="cat-label">Categories</span>
</div>

<div class="progress-area">
  <div class="progress-stats">
    <span class="count" id="progressCount">0 / 0</span>
    <span class="percent" id="progressPercent">0%</span>
  </div>
  <div class="progress-bar">
    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
  </div>
</div>

<div class="controls">
  <input type="search" id="searchBox" placeholder="Search items or locations...">
  <button class="filter-btn active" data-filter="all">All</button>
  <button class="filter-btn" data-filter="unchecked">Remaining</button>
  <button class="filter-btn" data-filter="checked">Completed</button>
  <button class="filter-btn" id="collapseAllBtn">Collapse</button>
  <button class="filter-btn" id="expandAllBtn">Expand</button>
  <button class="filter-btn" id="jumpNextBtn">Next &#x25BC;</button>
  <button class="filter-btn" id="undoBtn" disabled>Undo</button>
  <span class="room-badge" id="roomBadge" hidden>
    Room <code id="roomCodeDisplay"></code>
    <button class="leave-btn" id="leaveRoomBtn">Leave</button>
  </span>
</div>
</div>
<div class="sync-error" id="syncError" hidden></div>

<div class="room-overlay" id="roomOverlay">
  <div class="room-modal">
    <h2>Multiplayer Tracker</h2>
    <p>Create or join a room to sync progress with your group.</p>
    <input type="text" id="roomCodeInput" placeholder="Enter room code" maxlength="6" spellcheck="false" autocomplete="off">
    <div class="room-actions">
      <button class="room-btn primary" id="createRoomBtn">Create Room</button>
      <button class="room-btn" id="joinRoomBtn">Join Room</button>
    </div>
    <div class="room-error" id="roomError"></div>
  </div>
</div>

<main id="main"><div class="loading"><div class="spinner"></div></div></main>

<script src="ds3.js"></script>
</body>
</html>
